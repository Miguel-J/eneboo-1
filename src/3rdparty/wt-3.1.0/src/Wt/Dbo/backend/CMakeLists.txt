ADD_LIBRARY(wtdbosqlite3
  Sqlite3.C
  amalgamation/sqlite3.c
)

TARGET_LINK_LIBRARIES(wtdbosqlite3 wtdbo)

IF(NOT WIN32)
  TARGET_LINK_LIBRARIES(wtdbosqlite3 dl)
ENDIF(NOT WIN32)

INSTALL(TARGETS wtdbosqlite3
    RUNTIME DESTINATION bin
    LIBRARY DESTINATION ${LIB_INSTALL_DIR}
    ARCHIVE DESTINATION ${LIB_INSTALL_DIR})

SET_TARGET_PROPERTIES(
  wtdbosqlite3
PROPERTIES
  VERSION ${VERSION_SERIES}.${VERSION_MAJOR}.${VERSION_MINOR}
  SOVERSION ${WTDBO_SOVERSION}
  DEBUG_POSTFIX "d"
)

INSTALL_FILES(/include/Wt/Dbo/backend "^Sqlite3$")
